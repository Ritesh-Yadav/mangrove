{% extends 'project/tab_navigation.html' %}
{% block page_title %} Results for Questionnaire ( {{ project_code }} ) {% endblock %}
{% block page_js %}
    {{ block.super }}
    <script type="text/javascript" src="/media/javascript/jquery_pagination/jquery.pagination.js"></script>
    <script type="text/javascript" src="/media/javascript/csrf_token_handler.js"></script>
    <script type="text/javascript" src="/media/javascript/project/results.js"></script>
{% endblock %}
{% block page_css %}
    {{ block.super }}
    <link href="/media/css/plugins/jquery_pagination/pagination.css" media="screen" rel="stylesheet" />
{% endblock %}
{% block page_scss %}
    {{ block.super }}
    <link href="/media/css/scss/section_sms_results.scss" media="screen" rel="stylesheet" />
{% endblock %}
{% block content %}
    <div id="sms_results">
        <h3>Results</h3>
        <div>
            <div>
               <form id="question_form">
                    <fieldset>
                        <legend>Filter Data by:</legend>
                        <ul>
                            <li>
                                <label>Date received between</label>
                                    <input id="date_from" type="text"/>
                                to
                                    <input id="date_to" type="text"/>
                            </li>
                            <li class="margin_null">
                                <h6>Answer to question</h6>
                            </li>
                             <li>
                                <select class="question_filter">
                                    <option>-------Select------</option>
                                </select>
                                is <input type="text" class="answer_filter"/>
                            </li>
                            <li>
                                <a id="add_answer_filter" style="cursor:pointer">Add another</a>
                            </li>
                            <li>
                                <label>Contains</label>
                                <input id="contains_text" type="text"/>
                            </li>
                            <li>
                                <button id="filter">Filter</button>
                            </li>
                         </ul>
                    </fieldset>
               </form>
            </div>
            <label>Actions</label><select id="action" ><option>Actions ....</option><option>Delete</option></select>
            <div id="results">
                <input id="total_rows" type="hidden" value="{{ pages }}" />
                <div>
                    <table>
                        <tr>
                            <th>

                            </th>
                            <th>
                                Date Received
                            </th>
                            <th>
                                Source
                            </th>
                            <th>
                                Successful
                            </th>
                            {% for question in results.questions %}
                                <th>
                                    <span style="cursor:default" title='{{ question.1 }}'>{{ question.0 }}</span>
                                </th>
                            {% endfor %}
                        </tr>
                        {% for answer, id in results.submissions %}
                            <tr>
                                <td>
                                    <input type="checkbox" class = "selected_submissions" value="{{ id }}" />
                                </td>
                                <td>
                                    {{ answer.0 }}
                                </td>

                                <td>
                                    {{ answer.1 }}
                                </td>
                                <td>
                                    <span title='{{ answer.3 }}'>{{ answer.2 }}</span>
                                </td>
                                {% for each in answer|slice:"4:" %}
                                    <td>
                                        {{ each }}
                                    </td>
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </table>

                </div>

            </div>
            <div id="pagination"></div>
        </div>
        <div id = "success_message"></div>
    </div>
{% endblock %}