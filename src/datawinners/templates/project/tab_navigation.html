{% extends 'layout_application.html' %}
{% load i18n %}
{% load dw_tabs %}

{% block page_js %}
    {{ block.super }}
    <script src="/media/javascript/project/activate_project.js" type="text/javascript"></script>
    <script src="/media/javascript/project/sms_tester.js" type="text/javascript"></script>
    <script src="/media/javascript/project/questionnaire_preview.js" type="text/javascript"></script>
{% endblock %}


{% block section_title %}
    <h2 class="project_title">{{ project.name }}</h2>
    <div class="project_detail">
        <span class="project_status">{% trans "Project status:" %}
            <span class="{{ project.state }}_state">{% trans project.state %}</span>
        </span>
        {% if  project.state  != 'Active' %}
            <img src="/media/images/help_icon.png" class="help_icon" style="margin-top:-7px;">
            {% if project.state == 'Test' %}
                <div class="tooltip">
                    <p>{% trans "Your project status is Test. You need to click on 'Activate Project' to activate it." %}</p>
                </div>
                <a href="{{ project_links.activate_project_link }}" class="activate_project">{% trans "Activate Project" %}</a>
                <a href="#" id='sms_tester'>{% trans "Test SMS Questionnaire" %}</a>
                {% include 'project/sms_tester_form.html' %}
            {% else %}
                <div class="tooltip">
                    <p>{% trans "Your project is inactive. You need to complete the Profile to activate it." %}</p>
                </div>
                <a href="{{ project_links.activate_project_link }}" class="activate_project">{% trans "Activate Project" %}</a>
            {% endif %}
        {% endif %}
    </div>
    <div id="activate_project_block">
        <p class="warning_message">{% trans "Warning: Activating the project will remove all existing test data." %}</p>
        <a href="#" class="cancel_link" >{% trans "Cancel" %}</a>
        <a href="#" class="button" id="confirm">{% trans "Activate" %}</a>
    </div>

{% endblock %}

{% block navigation %}
<div class="grid_24 tab_navigation">
    <ul>
        <li class="{% ifactivetab 'tab_nav' 'overview' %}active{% else %}inactive{% endifactivetab %}">
            <a href="{{ project_links.overview_link }}" class="{{ disable_link_class }}">{% trans "Overview" %}</a>
        </li>
        {% if project.state == 'Active' %}
        <li class="{% ifactivetab 'tab_nav' 'subjects' %}active{% else %}inactive{% endifactivetab %}">
            <a href="{{ project_links.subjects_link }}" class="{{ disable_link_class }}">{% trans "Subjects" %}</a>
        </li>
        <li class="{% ifactivetab 'tab_nav' 'questionnaire' %}active{% else %}inactive{% endifactivetab %}">
            <a href="{{ project_links.questionnaire_link }}" class="{{ disable_link_class }}">{% trans "Questionnaire" %}</a>
        </li>
        <li class="{% ifactivetab 'tab_nav' 'data_senders' %}active{% else %}inactive{% endifactivetab %}">
            <a href="{{ project_links.datasenders_link }}" class="{{ disable_link_class }}">{% trans "Data Senders" %}</a>
        </li>
        <li class="{% ifactivetab 'tab_nav' 'reminders' %}active{% else %}inactive{% endifactivetab %}">
            <a href="{{ project_links.reminders_link }}" class="{{ disable_link_class }}">{% trans "Reminders" %}</a>
        </li>
        {% endif %}
        {% if project.state != 'Inactive' %}
        <li class="{% ifactivetab 'tab_nav' 'data' %}active{% else %}inactive{% endifactivetab %}">
            <a href="{{ project_links.data_analysis_link }}" class="{{ disable_link_class }}">{% trans "Data" %}</a>
        </li>
        {% endif %}
    </ul>
</div>
{% endblock %}

{% block secondary_navigation_data %}
<ul class="secondary_tab">
    <li class="{% ifactivetab 'secondary_tab_nav' 'summary' %}active{% else %}inactive{% endifactivetab %}">
        <img src="/media/images/help_icon.png" class="help_icon" style="margin-top:-7px;">
        <div class="tooltip"><p>
            {% trans "tooltip_tab_navigation" %}
        </p></div>
        <a href="#" class="{{ disable_link_class }}">{% trans "Summary" %}</a>
    </li>
    <li class="{% ifactivetab 'secondary_tab_nav' 'analysis' %}active{% else %}inactive{% endifactivetab %}">
        <a href="{{ project_links.data_analysis_link }}" class="{{ disable_link_class }}">{% trans "Analysis" %}</a>
    </li>
    <li class="{% ifactivetab 'secondary_tab_nav' 'activity_log' %}active{% else %}inactive{% endifactivetab %}">
        <a href="{{ project_links.submission_log_link }}" class="{{ disable_link_class }}">{% trans "All Data Records" %}</a>
    </li>
    {% if project.state == 'Active' and project_links.test_questionnaire_link != "" %}
    <li class="{% ifactivetab 'secondary_tab_nav' 'web_questionnaire' %}active{% else %}inactive{% endifactivetab %}">
        <a href="{{ project_links.test_questionnaire_link }}">{% trans "Web Submission" %}</a>
    </li>
    {% endif %}
</ul>
{% endblock %}

{% block secondary_navigation_subjects %}
<ul class="secondary_tab">
    <li class="{% ifactivetab 'secondary_tab_nav' 'subjects' %}active{% else %}inactive{% endifactivetab %}">
        <a href="{{ project_links.registered_subjects_link }}">{% trans "Registered Subjects" %}</a>
    </li>
    <li class="{% ifactivetab 'secondary_tab_nav' 'criteria' %}active{% else %}inactive{% endifactivetab %}">
        <a href="{{ project_links.subjects_link }}">{% trans "Registration Subjects" %}</a>
    </li>
</ul>
{% endblock %}

{% block secondary_navigation_datasenders %}
<ul class="secondary_tab">
    <li class="{% ifactivetab 'secondary_tab_nav' 'datasenders' %}active{% else %}inactive{% endifactivetab %}">
        <a href="{{ project_links.registered_datasenders_link }}">{% trans "Registered Data Senders" %}</a>
    </li>
    <li class="{% ifactivetab 'secondary_tab_nav' 'criteria' %}active{% else %}inactive{% endifactivetab %}">
        <a href="{{ project_links.datasenders_link }}">{% trans "Registration Questionnaire" %}</a>
    </li>
</ul>
{% endblock %}

{% block secondary_navigation_reminders %}
<ul class="secondary_tab">
    <li class="{% ifactivetab 'secondary_tab_nav' 'scheduled' %}active{% else %}inactive{% endifactivetab %}">
        <a href="{{ project_links.reminders_link }}">{% trans "Scheduled Reminders" %}</a>
    </li>
    <li class="{% ifactivetab 'secondary_tab_nav' 'sent' %}active{% else %}inactive{% endifactivetab %}">
        <a href="{{ project_links.sent_reminders_link }}">{% trans "Sent Reminders" %}</a>
    </li>
</ul>
{% endblock %}
