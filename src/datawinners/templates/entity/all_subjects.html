{% extends 'layout_application.html' %}
{% block page_title %}Subjects{% endblock %}

{% block section_title %}Subjects
<span class="title_links">
     <a id="register_link" class="float_right add_subject_link" href="{% url datawinners.entity.views.create_subject %}">Add a subject</a><img src="/media/images/help_icon.png" class="help_icon" style="margin-top:-6px;">
    <div class="tooltip">
        <p>
            <strong>What is this?</strong><br />
            Add subjects one-by-one using the online registration form<br /><br />
            <strong>What do I need to do?</strong><br />
            Click the blue "Add a subject" link and follow the step-by-step instructions
        </p>
    </div>
</span>
{% endblock %}

{% load dw_tabs %}
{% block body %}
    {% activetab "main_nav" "subjects" %}
    {{ block.super }}
{% endblock %}

{% block page_css %}
    {{ block.super }}
    <link href="/media/javascript/file_uploader/fileuploader.css" rel="stylesheet"/>
{% endblock %}

{% block page_scss %}
    {{ block.super }}
    <link href="/media/css/scss/section_subjects.scss" rel="stylesheet"/>
    <link href="/media/css/scss/section_all_subjects.scss" rel="stylesheet"/>
{% endblock %}


{% block page_js %}
    {{ block.super }}
    <script type="text/javascript" src="/media/javascript/subjects/index.js"></script>
    <script type="text/javascript" src="/media/javascript/file_uploader/fileuploader.js"></script>
{% endblock %}

{% load i18n %}
{% block content %}
    <div>
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="error {{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
        <div class="import_subject_form">
            <div id="file-uploader">
                <noscript>
                    <p>Please enable JavaScript to use file uploader.</p>
                    <!-- or put a simple form for upload here -->
                </noscript>
                <h6>Upload a CSV or a XL file</h6>

                <div id="file_uploader" class="float_left"></div><img src="/media/images/help_icon.png" class="help_icon" style="margin-top:6px;">
                <div class="tooltip"><p>
                    <strong>What is this?</strong><br />
                    Add a list of subjects all at once by importing an Excel (.xls) or a Comma Separated Value (.csv) file<br /><br />
                    <strong>What do I need to do?</strong><br />
                    Follow these five easy steps to import a list of Subjects:<br />
                    1) Open a new Excel spreadsheet. In cell A1, type form_code.  In cell B1, type T.  In cell C1 type N.  In cell D1 type M.
                    In cell E1 type S.  In cell F1 type L.  In cell G1 type G.  In cell H1 type D.<br />
                    2) In cell A2, type REG. In cell B2, type the Subject type (example: Clinic). In cell C2, type the name
                    of your Subject (example:  Northern Clinic). In cell D2, type the mobile telephone number of the Subject.
                    In cell E2, type a unique ID code for the Subject. DataWinners will automatically generate a unique ID number if you leave this cell blank.
                    In cell F2, type the location of the Subject. In cell
                    G2 type the GPS coordinates of the Subject (Right click on cell G2, choose "Format Cells", Choose "Text",
                    then click "OK". Then enter the GPS coordinates in the following format: 16.8665 47.53150. Remember do not
                    include a comma).  In cell F2 type a short description of the Subject.<br />
                    3. Repeat step #2 for each Subject starting in cell A3. Every Subject thereafter will occupy a new row (A4, A5, A6 etc.)<br />
                    4. Save the file as (.csv) or (.xls)<br />
                    5. Click on "Upload a file" button and follow instructions
                </p></div>
                <div class="clear"></div>
            </div>
            <div id='error_table'>
                <table class="styled_table">
                    <thead>
                    <th>Row Number</th>
                    <th>Row</th>
                    <th>Error</th>
                    </thead>
                    <tbody id='error_tbody'>

                    </tbody>
                </table>
            </div>
        </div>
        {% if all_data %}
            <h3>All Subjects</h3>
            {% include 'subject_table.html' %}
        {% endif %}
    </div>
{% endblock %}
